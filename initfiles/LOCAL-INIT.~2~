(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "INTERLISP" BASE 10)(FILECREATED " 2-Oct-2020 21:55:14" {DSK}<home>larry>ilisp>MEDLEY>INITFILES>LOCAL-INIT.;2 8016         changes to%:  (VARS LOCAL-INITCOMS)                    (FNS LOCAL-INIT)      previous date%: "22-Aug-2020 18:08:21" {DSK}<home>larry>ilisp>MEDLEY>INITFILES>LOCAL-INIT.;1)(PRETTYCOMPRINT LOCAL-INITCOMS)(RPAQQ LOCAL-INITCOMS       [[VARS (COMPILEIGNOREDECL T)              (MEDLEYDIR (OR (UNIX-GETENV "MEDLEYDIR")                             (CONCAT "{dsk}/home/" USERNAME "/ilisp/medley"]        (P (DEFCOMMAND ("show" :QUIET)                  (&REST EVENTSPEC)                  (CL:PPRINT (VALUOF EVENTSPEC T)                         T)))        (FNS LOCAL-INIT LoadPatches COLLECT-PATCH-FILES FIXMETA)        (P (FIXMETA))        (FUNCTIONS WITHOUT.PAGEHOLD)        [VARS (LISPUSERSDIRECTORIES (LIST (CONCAT MEDLEYDIR "/lispusers")                                          (CONCAT MEDLEYDIR "/library")))              (LISPSOURCEDIRECTORIES (LIST (CONCAT MEDLEYDIR "/sources")))              (LOCALPATCHDIRECTORY (CONCAT MEDLEYDIR "/patches"))              (DIRECTORIES (APPEND LOCALPATCHDIRECTORY LISPUSERSDIRECTORIES LISPSOURCEDIRECTORIES))              (USERGREETFILES '(({DSK}/Users/ USER /Lisp/INIT.LCOM)                                ({DSK}/Users/ USER /Lisp/INIT.DFASLs)                                ({DSK}/Users/ USER /Lisp/INIT]        [VARS (*USEOLDFONTDIRECTORIES* NIL)              [DISPLAYFONTDIRECTORIES (LIST (CONCAT MEDLEYDIR '/fonts/displayfonts)                                            (CONCAT MEDLEYDIR '/fonts/altofonts]              [INTERPRESSFONTDIRECTORIES (LIST (CONCAT MEDLEYDIR '/fonts/ipfonts]              (POSTSCRIPTFONTDIRECTORIES (LIST (CONCAT MEDLEYDIR '/fonts/postscriptfonts]        (DECLARE%: DONTEVAL@LOAD DOCOPY (P (LOCAL-INIT])(RPAQQ COMPILEIGNOREDECL T)(RPAQ MEDLEYDIR (OR (UNIX-GETENV "MEDLEYDIR")                        (CONCAT "{dsk}/home/" USERNAME "/ilisp/medley")))(DEFCOMMAND ("show" :QUIET) (&REST EVENTSPEC) (CL:PPRINT (VALUOF EVENTSPEC T)                                                     T))(DEFINEQ(LOCAL-INIT  [LAMBDA NIL    (DECLARE (GLOBALVARS MAKESYSNAME LOCALPATCHDIRECTORY))                                                           (* ; "Edited  2-Oct-2020 21:44 by larry")                                                             (* ;                                                            "Edited 14-Jun-2017 14:45 by kaplan")                                                             (* ;                                                            "Edited 14-Jun-2017 11:15 by kaplan")    (* ;; "This is what gets called when LOCAL-INIT is loaded.")    (* ;; "do the real work")    (CL:WHEN LOCALPATCHDIRECTORY        (LoadPatches LOCALPATCHDIRECTORY 'SYSLOAD MAKESYSDATE))])(LoadPatches  [LAMBDA (DIRECTORY LDFLG AFTERDATE)                        (* ; "Edited  7-Feb-92 11:50 by bbb")(* ;;; "Load all compiled files from the directory")    (DECLARE (GLOBALVARS *COMPILED-EXTENSIONS*))    (LET [(files (SORT (for EXT in *COMPILED-EXTENSIONS*                          bind (AFTERIDATE _ (if AFTERDATE                                                     then (OR (IDATE AFTERDATE)                                                                  0)                                                   else 0)) join (COLLECT-PATCH-FILES                                                                          (DIRECTORYNAME DIRECTORY)                                                                          EXT AFTERIDATE))                       (FUNCTION (LAMBDA (X Y)                                   (LESSP (CDR X)                                          (CDR Y]            (* ;                                                            "files are sorted by increasing date")         (for file in files do (SELECTQ LDFLG                                               (HIDDEN       (* ;                                                        "Load the file, but don't put it on FILELST")                                                       (LOAD? (CAR file)                                                              T)                                                       (SETQ FILELST (DREMOVE (FILENAMEFIELD                                                                               (CAR file)                                                                               'NAME)                                                                            FILELST)))                                               (LOAD? (CAR file)                                                      LDFLG)))         files])(COLLECT-PATCH-FILES  [LAMBDA (DIRECTORY EXT AFTERIDATE)                         (* ; "Edited  7-Feb-92 11:49 by bbb")    (* ;; "Generate list of files in DIRECTORY with extension EXT more recent than idate AFTERIDATE.  Return list of pairs (file . date).  Omits subdirectories.")    (RESETLST        (LET ((FILING.ENUMERATION.DEPTH 1)              (NAKED-DIR (UNPACKFILENAME.STRING DIRECTORY 'DIRECTORY))              FILE DATE)             (bind [GEN _ (\GENERATEFILES (CONCAT DIRECTORY "*." EXT ";")                                     '(ICREATIONDATE)                                     '(SORT RESETLST] while (SETQ FILE (\GENERATENEXTFILE GEN))                when (AND (STRING-EQUAL (UNPACKFILENAME.STRING FILE 'DIRECTORY)                                     NAKED-DIR)                              (> (SETQ DATE (\GENERATEFILEINFO GEN 'ICREATIONDATE))                                 AFTERIDATE)) collect (CONS FILE DATE))))])(FIXMETA  [LAMBDA NIL                                                (* ;                                                            "Edited 25-Jun-2017 17:12 by rmk:")    (KEYACTION 'BLANK-TOP '(METADOWN . METAUP)           \CURRENTKEYACTION)    (KEYACTION 'BLANK-TOP '(METADOWN . METAUP]))(FIXMETA)(DEFMACRO WITHOUT.PAGEHOLD (WINDOW &BODY FORMS)   `(RESETLST        (LET* ((TTYWINDOW ,WINDOW)               (ORIGINAL.PAGEFULLFN (WINDOWPROP TTYWINDOW 'PAGEFULLFN))               (NEW.PAGEFULLFN (FUNCTION NILL)))              (RESETSAVE (WINDOWPROP TTYWINDOW 'PAGEFULLFN NEW.PAGEFULLFN)                     (LIST [FUNCTION (LAMBDA (TTYWINDOW NEW.PAGEFULLFN ORIGINAL.PAGEFULLFN)                                       (COND                                          ((EQ (WINDOWPROP TTYWINDOW 'PAGEFULLFN)                                               NEW.PAGEFULLFN)                                           (WINDOWPROP TTYWINDOW 'PAGEFULLFN ORIGINAL.PAGEFULLFN]                           TTYWINDOW NEW.PAGEFULLFN ORIGINAL.PAGEFULLFN)))        ,@FORMS))(RPAQ LISPUSERSDIRECTORIES (LIST (CONCAT MEDLEYDIR "/lispusers")                                     (CONCAT MEDLEYDIR "/library")))(RPAQ LISPSOURCEDIRECTORIES (LIST (CONCAT MEDLEYDIR "/sources")))(RPAQ LOCALPATCHDIRECTORY (CONCAT MEDLEYDIR "/patches"))(RPAQ DIRECTORIES (APPEND LOCALPATCHDIRECTORY LISPUSERSDIRECTORIES LISPSOURCEDIRECTORIES))(RPAQQ USERGREETFILES (({DSK}/Users/ USER /Lisp/INIT.LCOM)                           ({DSK}/Users/ USER /Lisp/INIT.DFASLs)                           ({DSK}/Users/ USER /Lisp/INIT)))(RPAQQ *USEOLDFONTDIRECTORIES* NIL)(RPAQ DISPLAYFONTDIRECTORIES (LIST (CONCAT MEDLEYDIR '/fonts/displayfonts)                                       (CONCAT MEDLEYDIR '/fonts/altofonts)))(RPAQ INTERPRESSFONTDIRECTORIES (LIST (CONCAT MEDLEYDIR '/fonts/ipfonts)))(RPAQ POSTSCRIPTFONTDIRECTORIES (LIST (CONCAT MEDLEYDIR '/fonts/postscriptfonts)))(DECLARE%: DONTEVAL@LOAD DOCOPY (LOCAL-INIT))(PUTPROPS LOCAL-INIT COPYRIGHT (NONE))(DECLARE%: DONTCOPY  (FILEMAP (NIL (2187 6191 (LOCAL-INIT 2197 . 2951) (LoadPatches 2953 . 4901) (COLLECT-PATCH-FILES 4903 . 5880) (FIXMETA 5882 . 6189)))))STOP